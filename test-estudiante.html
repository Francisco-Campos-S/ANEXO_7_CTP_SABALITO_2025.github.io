<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba Estudiante - ANEXO 7</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .btn {
            background: #28a745;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
        }
        .btn:hover {
            background: #218838;
        }
        .btn-simple {
            background: #6f42c1;
        }
        .btn-simple:hover {
            background: #5a32a3;
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            display: none;
        }
        .notification.success {
            background: #28a745;
        }
        .notification.error {
            background: #dc3545;
        }
        .notification.loading {
            background: #007bff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Prueba del Sistema de Estudiantes</h1>
        <p>Esta p√°gina es para probar que el guardado funcione correctamente.</p>
        
        <div>
            <button class="btn btn-simple" onclick="guardarEstudianteSimple()">
                üöÄ Guardar Prueba Simple
            </button>
            <button class="btn" onclick="guardarEstudianteCompleto()">
                üíæ Guardar Prueba Completa
            </button>
        </div>
        
        <div id="resultado" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px; display: none;">
            <h3>Resultado:</h3>
            <p id="resultadoTexto"></p>
        </div>
    </div>

    <!-- Notificaciones -->
    <div id="notification" class="notification"></div>

    <script>
        // Funci√≥n para obtener la URL del script
        function getScriptUrl() {
            return 'https://script.google.com/macros/s/AKfycbxAhDehIJjEtCZvVprQj8ebTLRYAxxfOGsBGZDbHPFzcDj6gmWRu-bE27KelT5C-on7nQ/exec';
        }

        // Funci√≥n para mostrar notificaciones
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Funci√≥n para guardar estudiante simple
        async function guardarEstudianteSimple() {
            try {
                showNotification('üîÑ Enviando datos simples...', 'loading');
                
                const data = {
                    cedula: '999999999',
                    nombre: 'Estudiante Prueba Simple',
                    grado: '11¬∞',
                    seccion: 'A',
                    funcionamientoAcademico: '{"logros_espanol":"Prueba simple","nivel_espanol":"Bueno"}',
                    desarrolloVocacional: '{"intereses_habilidades":"Prueba simple"}',
                    docente: '{"nombre":"Docente Prueba","cedula":"111111111"}',
                    fechaRegistro: new Date().toLocaleString('es-CR'),
                    tipo: 'estudiante'
                };
                
                console.log('Enviando datos simples:', data);
                
                const params = new URLSearchParams();
                Object.keys(data).forEach(key => {
                    params.append(key, data[key]);
                });
                
                const scriptUrl = getScriptUrl();
                console.log('Enviando a:', scriptUrl);
                
                const response = await fetch(scriptUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: params
                });
                
                showNotification('‚úÖ ¬°Prueba simple enviada exitosamente!', 'success');
                mostrarResultado('Prueba simple completada. Revisa la consola para m√°s detalles.');
                
            } catch (error) {
                console.error('Error en prueba simple:', error);
                showNotification('‚ùå Error en prueba: ' + error.message, 'error');
                mostrarResultado('Error: ' + error.message);
            }
        }

        // Funci√≥n para guardar estudiante completo
        async function guardarEstudianteCompleto() {
            try {
                showNotification('üîÑ Enviando datos completos...', 'loading');
                
                const data = {
                    cedula: '888888888',
                    nombre: 'Estudiante Prueba Completo',
                    grado: '11¬∞',
                    seccion: 'B',
                    funcionamientoAcademico: JSON.stringify({
                        logros_espanol: 'Excelente comprensi√≥n lectora',
                        nivel_espanol: 'Muy Bueno',
                        docente_espanol: 'Prof. Ana Garc√≠a',
                        logros_matematicas: 'Buen manejo de √°lgebra',
                        nivel_matematicas: 'Bueno',
                        docente_matematicas: 'Prof. Carlos L√≥pez'
                    }),
                    desarrolloVocacional: JSON.stringify({
                        intereses_habilidades: 'Interesado en tecnolog√≠a y programaci√≥n',
                        expectativas_vocacionales: 'Estudiar ingenier√≠a en sistemas',
                        observaciones_generales: 'Estudiante con gran potencial'
                    }),
                    docente: JSON.stringify({
                        nombre: 'Lic. Mar√≠a Elena Rodr√≠guez',
                        cedula: '123456789',
                        fechaEvaluacion: new Date().toISOString().split('T')[0]
                    }),
                    fechaRegistro: new Date().toLocaleString('es-CR'),
                    tipo: 'estudiante'
                };
                
                console.log('Enviando datos completos:', data);
                
                const params = new URLSearchParams();
                Object.keys(data).forEach(key => {
                    params.append(key, data[key]);
                });
                
                const scriptUrl = getScriptUrl();
                const response = await fetch(scriptUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: params
                });
                
                showNotification('‚úÖ ¬°Prueba completa enviada exitosamente!', 'success');
                mostrarResultado('Prueba completa completada. Revisa la consola para m√°s detalles.');
                
            } catch (error) {
                console.error('Error en prueba completa:', error);
                showNotification('‚ùå Error en prueba: ' + error.message, 'error');
                mostrarResultado('Error: ' + error.message);
            }
        }

        // Funci√≥n para mostrar resultado
        function mostrarResultado(texto) {
            const resultado = document.getElementById('resultado');
            const resultadoTexto = document.getElementById('resultadoTexto');
            resultadoTexto.textContent = texto;
            resultado.style.display = 'block';
        }

        // Mostrar informaci√≥n de la p√°gina
        console.log('P√°gina de prueba cargada');
        console.log('URL del script:', getScriptUrl());
    </script>
</body>
</html>
